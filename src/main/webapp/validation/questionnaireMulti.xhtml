<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://xmlns.jcp.org/jsf/core"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
<ui:composition template="/WEB-INF/templates/standard.xhtml">
  <ui:param name="title" value="Bean Validation" />
  <ui:define name="content">
    <h2>JSF form with single field validation and additional whole bean validation</h2> 
    
    <h:form id="form1">
      <h:panelGrid columns="3">
        <h:outputLabel value="Poll date: " for="pollDate" />
        <h:inputText id="pollDate"
          value="#{questionnairePresenter.questionnaire.pollDate}"
          size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="pollDate" />

        <h:outputLabel value="Name: " for="name" />
        <h:inputText id="name"
          value="#{questionnairePresenter.questionnaire.name}" size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="name" />

        <h:outputLabel value="Street: " for="street" />
        <h:inputText id="street"
          value="#{questionnairePresenter.questionnaire.address.street}"
          size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="street" />

        <h:outputLabel value="ZIP code: " for="zipCode" />
        <h:inputText id="zipCode"
          value="#{questionnairePresenter.questionnaire.address.zipCode}"
          size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="zipCode" />

        <h:outputLabel value="City: " for="city" />
        <h:inputText id="city"
          value="#{questionnairePresenter.questionnaire.address.city}"
          size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="city" />

        <h:outputLabel value="Age: " for="age" />
        <h:inputText id="age"
          value="#{questionnairePresenter.questionnaire.age}" size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="age" />

        <h:outputLabel value="Email: " for="email" />
        <h:inputText id="email"
          value="#{questionnairePresenter.questionnaire.email}"
          size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="email" />

        <h:outputLabel value="Comment: " for="comment" />
        <h:inputText id="comment"
          value="#{questionnairePresenter.questionnaire.comment}"
          size="50">
          <f:validateBean
            validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput" />
        </h:inputText>
        <h:message for="comment" />

        <h:commandButton value="ok" action="thanks"/>
      </h:panelGrid>

      <!-- Workaround for bug in Mojarra 2.3.3: Execute in phase 3 only -->
      <f:validateWholeBean
        value="#{questionnairePresenter.questionnaire}"
        validationGroups="de.gedoplan.whatsnewinjee8.validation.group.InitialInput"
        rendered="#{facesContext.currentPhaseId.ordinal eq 3}" />
    </h:form>


    <h:messages globalOnly="true" />
  </ui:define>
</ui:composition>
</html>
